digraph codec {
        rankdir=LR

        recv[label="recv\nmsg",shape=circle]
        send[label="send\nmsg",shape=circle]

        deserialize[shape=box]
        setters[shape=box]

        serialize[shape=box]
        getters[shape=box]

        fields[shape=ellipse]
        id[shape=ellipse]

        appcall[label="application",shape=octagon,color=gray]


        {rank=same recv;deserialize;setters}
        {rank=same send;serialize;getters}

        recv ->  deserialize -> fields
        deserialize -> id
        id -> serialize

        send -> serialize[dir=back]
        fields -> serialize

        setters->fields->getters
        setters->id->getters

        setters->appcall[dir=back]
        appcall->getters[dir=back]
}
